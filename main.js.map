{"version":3,"sources":["webpack://mesto/./src/components/Card.js","webpack://mesto/./src/components/Popup.js","webpack://mesto/./src/utils/constants.js","webpack://mesto/./src/components/PopupWithForm.js","webpack://mesto/./src/components/PopupWithImage.js","webpack://mesto/./src/components/FormValidator.js","webpack://mesto/./src/components/Section.js","webpack://mesto/./src/components/UserInfo.js","webpack://mesto/./src/components/Api.js","webpack://mesto/./src/pages/index.js"],"names":["Card","data","templateSelector","handleCardClick","handleDeleteClick","handleLikeClick","_card","remove","this","_templateSelector","_handleCardClick","_handleDeleteClick","_handleLikeClick","created","_create","liked","value","_likeButton","classList","quantity","_likeCounter","textContent","document","querySelector","content","firstElementChild","_imgElement","addEventListener","removable","_trashButton","element","src","link","alt","name","_template","cloneNode","_buildImage","trashButtonClass","trashButtonSelector","trashButtonVisibleClass","add","_titleElement","_buildTitle","updateLikes","likes","length","_setListeners","Popup","elementSelector","e","target","currentTarget","_closeButton","close","key","altKey","ctrlKey","metaKey","shiftKey","_element","_elementOpenedClass","_handleEscClose","removeEventListener","_clickHandler","defaultFormConfig","formSelector","inputSelector","submitButtonSelector","inputErrorClass","errorClass","profileSelectors","nameSelector","aboutSelector","avatarSelector","editorSelector","editButtonSelector","addButtonSelector","PopupWithForm","formSubmitHandler","preventDefault","_submitButton","_formSubmitHandler","_getInputValues","then","catch","console","error","finally","_submitButtonTitle","activeElement","blur","form","_defaultFormSubmitHandler","reset","elements","values","Array","from","forEach","el","tagName","PopupWithImage","_popupImage","_popupCaption","FormValidator","inputElement","errorMessage","errorElement","id","_data","_inputList","_hideInputError","_toggleButtonState","validity","valid","_showInputError","validationMessage","inputList","some","disable","_buttonElement","disabled","_hasInvalidInput","_checkInputValidity","_resetFormErrors","_validationHandler","querySelectorAll","Section","containerSelector","items","renderer","_initialArray","_container","prepend","UserInfo","_nameElement","_aboutElement","_avatarElement","about","avatar","options","res","ok","json","Promise","reject","status","_customFetch","cardId","_baseUrl","baseUrl","_headers","headers","method","body","JSON","stringify","fetch","_handleFetch","authorization","profileUserInfo","profileEditor","api","userInfo","setEventListeners","enableValidation","nameInput","aboutInput","currentUserData","open","avatarEditor","parentElement","imageViewer","deleteConfirmation","card","currentCard","_id","all","userData","initialCards","cardsList","reverse","owner","user","cardInstance","result","setItem","renderItems","elementEditor","title"],"mappings":"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","file":"main.js","sourcesContent":["export default class Card {\n  constructor(\n    data,\n    templateSelector,\n    handleCardClick,\n    handleDeleteClick,\n    handleLikeClick\n  ) {\n    this.data = data;\n\n    this._templateSelector = templateSelector;\n\n    this._handleCardClick = handleCardClick;\n    this._handleDeleteClick = handleDeleteClick;\n    this._handleLikeClick = handleLikeClick;\n\n    this.created = this._create();\n\n    if (this.data.liked) {\n      this.liked = 1;\n    }\n  }\n\n  set liked(value) {\n    this._likeButton.classList[value ? \"add\" : \"remove\"](\n      \"element__like-button_active\"\n    );\n    this.data.liked = value;\n  }\n\n  get liked() {\n    return this.data.liked;\n  }\n\n  remove = () => this._card.remove();\n\n  updateLikes(quantity) {\n    this._likeCounter.textContent = quantity;\n  }\n\n  get _template() {\n    return document.querySelector(this._templateSelector).content\n      .firstElementChild;\n  }\n\n  _setListeners() {\n    this._imgElement.addEventListener(\"click\", this._handleCardClick);\n    this.data.removable &&\n      this._trashButton.addEventListener(\"click\", this._handleDeleteClick);\n    this._likeButton.addEventListener(\"click\", this._handleLikeClick);\n  }\n\n  _buildImage(element) {\n    element.src = this.data.link;\n    element.alt = this.data.name;\n  }\n\n  _buildTitle(element) {\n    element.textContent = this.data.name;\n  }\n\n  _create() {\n    this._card = this._template.cloneNode(1);\n    this._imgElement = this._card.querySelector(\".element__image\");\n    this._buildImage(this._imgElement);\n    const trashButtonClass = \"element__trash-button\";\n    const trashButtonSelector = `.${trashButtonClass}`;\n    const trashButtonVisibleClass = `${trashButtonClass}_visible`;\n    this._trashButton = this._card.querySelector(trashButtonSelector);\n    this.data.removable &&\n      this._trashButton.classList.add(trashButtonVisibleClass);\n    this._titleElement = this._card.querySelector(\".element__title\");\n    this._buildTitle(this._titleElement);\n    this._likeButton = this._card.querySelector(\".element__like-button\");\n    this._likeCounter = this._card.querySelector(\".element__like-counter\");\n    this.updateLikes(this.data.likes.length);\n    this._setListeners();\n    return this._card;\n  }\n}\n","export default class Popup {\n  constructor(elementSelector) {\n    this._element = document.querySelector(elementSelector);\n\n    this._closeButton = this._element.querySelector(\".popup__close-button\");\n  }\n\n  _elementOpenedClass = \"popup_opened\";\n\n  _clickHandler = (e) =>\n    (e.target === e.currentTarget || e.target === this._closeButton) &&\n    this.close();\n\n  _handleEscClose = (e) =>\n    e.key === \"Escape\" &&\n    !e.altKey &&\n    !e.ctrlKey &&\n    !e.metaKey &&\n    !e.shiftKey &&\n    this.close();\n\n  open() {\n    this._element.classList.add(this._elementOpenedClass);\n\n    document.addEventListener(\"keydown\", this._handleEscClose);\n  }\n\n  close() {\n    this._element.classList.remove(this._elementOpenedClass);\n\n    document.removeEventListener(\"keydown\", this._handleEscClose);\n  }\n\n  setEventListeners() {\n    this._element.addEventListener(\"click\", this._clickHandler);\n  }\n}\n","export const defaultFormConfig = {\n  formSelector: '.popup__form',\n  inputSelector: '.popup__input',\n  submitButtonSelector: '.popup__button',\n  inputErrorClass: 'popup__input_type_error',\n  errorClass: 'popup__error_visible',\n};\n\nexport const profileSelectors = {\n  nameSelector: '.profile__name',\n  aboutSelector: '.profile__description',\n  avatarSelector: '.profile__avatar',\n  editorSelector: '#profile-editor',\n  editButtonSelector: '.profile__edit-button',\n  addButtonSelector: '.profile__add-button',\n};\n\nexport const cardSelectors = {\n  templateSelector: '#element-template',\n  listSelector: '.elements__list',\n};\n\nexport const popupSelectors = {\n  avatarEditor: '#avatar-editor',\n  imageViewer: '#image-viewer',\n  deleteConfirmation: '#delete-confirmation',\n  elementEditor: '#element-editor',\n};","import Popup from \"./Popup\";\n\nimport { defaultFormConfig } from \"./../utils/constants\";\n\nexport default class PopupWithForm extends Popup {\n  constructor(elementSelector, formSubmitHandler) {\n    super(elementSelector);\n\n    this.form = this._element.querySelector(defaultFormConfig.formSelector);\n    this._submitButton = this.form.querySelector(\n      defaultFormConfig.submitButtonSelector\n    );\n    this._submitButtonTitle = this._submitButton.textContent;\n\n    this._formSubmitHandler = formSubmitHandler;\n  }\n\n  _defaultFormSubmitHandler = (e) => {\n    e.preventDefault();\n\n    this._submitButton.textContent = \"Сохранение...\";\n\n    if (this._formSubmitHandler) {\n      this._formSubmitHandler(this._getInputValues())\n        .then(() => this.close())\n        .catch(console.error)\n        .finally(\n          () => (this._submitButton.textContent = this._submitButtonTitle)\n        );\n    }\n\n    document.activeElement.blur();\n  };\n\n  setEventListeners() {\n    super.setEventListeners();\n\n    this.form.addEventListener(\"submit\", this._defaultFormSubmitHandler);\n  }\n\n  close() {\n    super.close();\n\n    this.form.reset();\n  }\n\n  _getInputValues() {\n    const { elements } = this.form;\n    const values = {};\n    Array.from(elements).forEach((el) => {\n      if (el.tagName === \"INPUT\") {\n        values[el.name] = el.value;\n      }\n    });\n    return values;\n  }\n}\n","import Popup from './Popup';\n\nexport default class PopupWithImage extends Popup {\n  constructor(elementSelector) {\n    super(elementSelector);\n\n    this._popupImage = this._element.querySelector('.popup__image');\n    this._popupCaption = this._element.querySelector('.popup__caption');\n  }\n\n  open(data) {\n    this._popupImage.src = data.link;\n    this._popupImage.alt = data.name;\n    this._popupCaption.textContent = data.name;\n\n    super.open();\n  }\n}","export default class FormValidator {\n  constructor(data, element) {\n    this._data = data;\n    this._element = element;\n    this._inputList = Array.from(\n      this._element.querySelectorAll(this._data.inputSelector)\n    );\n\n    this._buttonElement = this._element.querySelector(\n      this._data.submitButtonSelector\n    );\n  }\n\n  enableValidation() {\n    this._toggleButtonState();\n\n    this._setListeners();\n  }\n\n  _showInputError = (inputElement, errorMessage) => {\n    const errorElement = this._element.querySelector(\n      `#${inputElement.id}-error`\n    );\n    inputElement.classList.add(this._data.inputErrorClass);\n    errorElement.textContent = errorMessage;\n    errorElement.classList.add(this._data.errorClass);\n  };\n\n  _hideInputError = (inputElement) => {\n    const errorElement = this._element.querySelector(\n      `#${inputElement.id}-error`\n    );\n    inputElement.classList.remove(this._data.inputErrorClass);\n    errorElement.classList.remove(this._data.errorClass);\n    errorElement.textContent = \"\";\n  };\n\n  _resetFormErrors = () => {\n    this._inputList.forEach((inputElement) =>\n      this._hideInputError(inputElement)\n    );\n    this._toggleButtonState(1);\n  };\n\n  _checkInputValidity = (inputElement) =>\n    inputElement.validity.valid\n      ? this._hideInputError(inputElement)\n      : this._showInputError(inputElement, inputElement.validationMessage);\n\n  _hasInvalidInput = (inputList) =>\n    inputList.some((inputElement) => !inputElement.validity.valid);\n\n  _toggleButtonState = (disable) =>\n    (this._buttonElement.disabled =\n      disable || this._hasInvalidInput(this._inputList));\n\n  _validationHandler = (inputElement) => {\n    this._checkInputValidity(inputElement);\n\n    this._toggleButtonState();\n  };\n\n  _setListeners = () => {\n    this._element.addEventListener(\"reset\", this._resetFormErrors);\n\n    this._inputList.forEach((inputElement) =>\n      inputElement.addEventListener(\"input\", () =>\n        this._validationHandler(inputElement)\n      )\n    );\n  };\n}\n","export default class Section {\n  constructor({ items, renderer }, containerSelector) {\n    this._initialArray = items;\n    this.renderer = renderer;\n\n    this._container = document.querySelector(containerSelector);\n  }\n\n  setItem(element) {\n    this._container.prepend(element);\n  }\n\n  renderItems() {\n    this._initialArray.forEach(this.renderer);\n  }\n}\n","export default class UserInfo {\n  constructor({ nameSelector, aboutSelector, avatarSelector }) {\n    this._nameElement = document.querySelector(nameSelector);\n    this._aboutElement = document.querySelector(aboutSelector);\n    this._avatarElement = document.querySelector(avatarSelector);\n  }\n\n  get userInfo() {\n    return {\n      name: this._nameElement.textContent,\n      about: this._aboutElement.textContent,\n      avatar: this._avatarElement.src,\n    };\n  }\n\n  set userInfo({ name, about, avatar }) {\n    name && (this._nameElement.textContent = name);\n    about && (this._aboutElement.textContent = about);\n    avatar && (this._avatarElement.src = avatar);\n  }\n}\n","const cohortId = \"cohort-26\";\nconst token = \"20eaaff4-36c4-45f3-b722-ad937d0ed9e1\";\n\nconst api = {\n  url: \"mesto.nomoreparties.co\",\n  protocol: \"https://\",\n  version: \"v1\",\n};\n\nclass Api {\n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n    this._headers = options.headers;\n  }\n\n  _handleFetch = (res) =>\n    res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\n\n  _customFetch(target, method, body) {\n    const options = {\n      headers: this._headers,\n    };\n\n    if (method && method !== \"GET\") {\n      options.method = method;\n      if (method !== \"DELETE\") {\n        options.headers[\"Content-Type\"] = \"application/json\";\n      }\n    }\n\n    if (body) {\n      options.body = JSON.stringify(body);\n    }\n\n    return fetch(`${this._baseUrl}/${target}`, options).then(this._handleFetch);\n  }\n\n  getUserInfo() {\n    return this._customFetch(\"users/me\");\n  }\n\n  getInitialCards() {\n    return this._customFetch(\"cards\");\n  }\n\n  editProfile = ({ name, about }) =>\n    this._customFetch(\"users/me\", \"PATCH\", {\n      name,\n      about,\n    });\n\n  addCard = (name, link) =>\n    this._customFetch(\"cards\", \"POST\", {\n      name,\n      link,\n    });\n\n  deleteCard = (cardId) => this._customFetch(`cards/${cardId}`, \"DELETE\");\n\n  likeCard = (cardId) => this._customFetch(`cards/likes/${cardId}`, \"PUT\");\n\n  unLikeCard = (cardId) => this._customFetch(`cards/likes/${cardId}`, \"DELETE\");\n\n  updateAvatar = ({ avatar }) =>\n    this._customFetch(\"users/me/avatar\", \"PATCH\", {\n      avatar,\n    });\n}\n\nexport default new Api({\n  baseUrl: `${api.protocol}${api.url}/${api.version}/${cohortId}`,\n  headers: {\n    authorization: token,\n  },\n});\n","import \"./index.css\";\n\nimport Card from \"./../components/Card\";\nimport PopupWithForm from \"./../components/PopupWithForm\";\nimport PopupWithImage from \"./../components/PopupWithImage\";\nimport FormValidator from \"./../components/FormValidator\";\nimport Section from \"./../components/Section\";\nimport UserInfo from \"./../components/UserInfo\";\nimport api from \"./../components/Api\";\n\nimport {\n  defaultFormConfig,\n  profileSelectors,\n  cardSelectors,\n  popupSelectors,\n} from \"../utils/constants\";\n\nconst profileUserInfo = new UserInfo(profileSelectors);\n\nconst profileEditor = new PopupWithForm(\n  profileSelectors.editorSelector,\n  (data) =>\n    api.editProfile(data).then(\n      ({ name, about }) =>\n        (profileUserInfo.userInfo = {\n          name,\n          about,\n        })\n    )\n);\nprofileEditor.setEventListeners();\n\nconst profileEditorValidator = new FormValidator(\n  defaultFormConfig,\n  profileEditor.form\n);\nprofileEditorValidator.enableValidation();\n\nconst { name: nameInput, about: aboutInput } = profileEditor.form.elements;\n\nconst profileEditorOpenButton = document.querySelector(\n  profileSelectors.editButtonSelector\n);\nprofileEditorOpenButton.addEventListener(\"click\", () => {\n  const currentUserData = profileUserInfo.userInfo;\n\n  nameInput.value = currentUserData.name;\n  aboutInput.value = currentUserData.about;\n\n  profileEditor.open();\n});\n\nconst avatarEditor = new PopupWithForm(popupSelectors.avatarEditor, (data) =>\n  api.updateAvatar(data).then(\n    ({ avatar }) =>\n      (profileUserInfo.userInfo = {\n        avatar,\n      })\n  )\n);\navatarEditor.setEventListeners();\n\nconst avatarEditorValidator = new FormValidator(\n  defaultFormConfig,\n  avatarEditor.form\n);\navatarEditorValidator.enableValidation();\n\nconst avatarEditorOpenButton = document.querySelector(\n  profileSelectors.avatarSelector\n).parentElement;\navatarEditorOpenButton.addEventListener(\"click\", () => avatarEditor.open());\n\nconst imageViewer = new PopupWithImage(popupSelectors.imageViewer);\nimageViewer.setEventListeners();\n\nconst deleteConfirmation = new PopupWithForm(\n  popupSelectors.deleteConfirmation,\n  () => {\n    const card = deleteConfirmation.currentCard;\n    return api.deleteCard(card.data._id).then(card.remove);\n  }\n);\ndeleteConfirmation.setEventListeners();\n\nPromise.all([api.getUserInfo(), api.getInitialCards()])\n  .then(([userData, initialCards]) => {\n    const { name, about, avatar } = userData;\n    profileUserInfo.userInfo = {\n      name,\n      about,\n      avatar,\n    };\n\n    const cardsList = new Section(\n      {\n        items: initialCards.reverse(),\n        renderer: (data) => {\n          data.removable = data.owner._id === userData._id;\n\n          data.liked = data.likes.some((user) => user._id === userData._id);\n\n          const cardInstance = new Card(\n            data,\n            cardSelectors.templateSelector,\n            () => {\n              const { name, link } = data;\n              imageViewer.open({ name, link });\n            },\n            () => {\n              deleteConfirmation.currentCard = cardInstance;\n              deleteConfirmation.open();\n            },\n            () =>\n              (cardInstance.liked ? api.unLikeCard : api.likeCard)(data._id)\n                .then((result) => {\n                  cardInstance.liked = !cardInstance.liked;\n                  cardInstance.updateLikes(result.likes.length);\n                })\n                .catch(console.error)\n          );\n\n          cardsList.setItem(cardInstance.created);\n        },\n      },\n      cardSelectors.listSelector\n    );\n\n    cardsList.renderItems();\n\n    const elementEditor = new PopupWithForm(\n      popupSelectors.elementEditor,\n      (data) => api.addCard(data.title, data.link).then(cardsList.renderer)\n    );\n    elementEditor.setEventListeners();\n\n    const elementEditorValidator = new FormValidator(\n      defaultFormConfig,\n      elementEditor.form\n    );\n    elementEditorValidator.enableValidation();\n\n    const elementEditorOpenButton = document.querySelector(\n      profileSelectors.addButtonSelector\n    );\n    elementEditorOpenButton.addEventListener(\"click\", () =>\n      elementEditor.open()\n    );\n  })\n  .catch(console.error);\n"],"sourceRoot":""}